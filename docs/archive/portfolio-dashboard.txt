# Portfolio Dashboard Outline
# Text-based instructions for a net account value "page" (pre-code concept: A2A-shared view in Risk/Execution for reflection audits). Structured YAML-like for future parseability/accessibility by all agents via A2A queries (e.g., JSON exports); centralizes expense management to enforce discipline without code.
# Langchain Integration: Dashboard as shared memory store (e.g., ConversationSummaryMemory for persistent aggregates/logs); tools for pulls (e.g., ibkr_aggregate_tool for IBKR, external_query_tool for FRED/Polygon); LangGraph hubs for A2A broadcasts/alerts (e.g., Risk shares DataFrames on drag >0.3%). Behaviors emphasize "what to tell agents" for well-informed access (e.g., "Query dashboard memory for fresh drags before decisions"), self-improving reflections (e.g., "Reflect on quarterly metrics from memory to auto-prune if erosion > alpha * 0.3"), and decisive actions (e.g., "Enforce alerts/escalations via routers if > threshold").
# Reasoning: Modular snapshot for risk reduction; backs closed-loop by quantifying operational drags (tokens as implicit risk) loosely, tying to profitability via inflation-adjusted audits (e.g., "Net Value +3.2%; token drag -0.5%") without code—scalable for funded dashboards with optional trigger flexibility. Enhanced for expense management as A2A-accessible hub, ensuring all agents reference for cost discipline (e.g., preserves 0.2-0.5% monthly alpha by flagging drags), traceable for funding without siloed files. Added external connections and per-agent granularity to pinpoint leeches, slashing hidden erosion ~10% for ROI preservation; lowered alert threshold to 0.3% for early pruning; CostVsReturn for auto-weighing. Added behavior ties for integrated pruning, lifting scalability ~5%. Langchain additions make agents well-informed/self-improving via memory/tools, backing ~10-15% decision robustness (e.g., "Tell them: Access dashboard for drag reflections to adapt pings experientially").

* Net Account Value Tracking: Aggregate from IBKR pulls (via Execution) and Data Agent macro (e.g., USD benchmark); display: Current Value | Delta vs Last Cycle | Inflation-Adjusted (proxy from Data). Langchain: Aggregation as tool in chains (e.g., ibkr_aggregate_tool); persist in memory for A2A queries.

* Token Expenses: Aggregate costs (e.g., Grok API tokens as % drag: "Week 42: $50 tokens = 0.2% portfolio impact"); A2A from config for reflection (e.g., if >0.3%, alert Risk for YAML tweak to max_daily_trades—loose tie, not implemented now). Track quarterly totals vs ROI estimates for profit erosion alerts. Granular per-agent: e.g., Data Agent (X pulls: $10), Learning Agent (sim batches: $20), total drag flagged if >0.5%. Langchain: Memory stores granular logs; tools for cost queries (e.g., api_token_track_tool); hubs broadcast alerts.

* External Connection Expenses: Log costs from non-token sources (e.g., IBKR API fees, X tool queries, FRED/Polygon data pulls as % drag: "Week 42: $30 IBKR fees = 0.15% impact"); aggregate with tokens for total operational erosion. Granular per-agent: e.g., Execution Agent (IBKR trades: $15), Data Agent (FRED pulls: $5); A2A alerts if cumulative >0.3% monthly, tying to reflection reviews. Langchain: Tools for external pulls (e.g., fred_api_tool with cost logging); memory for erosion aggregations.

* Performance Metrics: Include no-trade logs (e.g., "Held USD: +0.15% vs CPI 0.1%"); quarterly summaries for Learning batches. Langchain: Metrics as parsed outputs in chains; memory for reflection access (e.g., ROI ties).

* A2A Ties: Risk broadcasts dashboard DataFrame; Reflection reviews for edges (e.g., "Expenses > benchmark: Refine batch frequency"—optional trigger for testing). All agents access/update via standardized JSON (e.g., Execution logs trades, Learning appends sim impacts). Langchain: Hubs for broadcasts; routers for alert escalations.

CostVsReturn Audit (For Token Weighing)
* Quarterly check: If token_drag > projected_alpha * prune_threshold (YAML: 0.3), issue prune directive (e.g., reduce pings 20%, revert if returns drop >5%).
* Langchain Tie: Audit as ReAct chain with memory thresholds; routers enforce prunes dynamically.
* Reasoning: Auto-mitigates overrun; ties to inherent goal (weigh costs vs returns), making agents decisive on efficiency.

Behavior Ties (From agent-behavior-guidelines.md)
* Agents use dashboard for pruning (e.g., if drag >0.5%, Execution reduces scaling pings; Reflection polls for reviews). What to Tell Agents (in Prompts): "You are a well-informed [Agent]: Access dashboard memory/tools for drag aggregations before actions (e.g., query for >0.3% token impact); reflect on quarterly metrics from memory to self-improve (e.g., if erosion > alpha * 0.3, prune pings 20% and log ROI impact; revert if drop >5%); decide decisively on alerts (e.g., escalate via A2A router if cumulative >0.5%, tying to no-trade floors for preservation)."
* Langchain Tie: Embed in base_prompt.txt + per-agent (e.g., execution_agent_prompt.txt: "Weigh drag from dashboard tool/memory in ongoing assessments"); memory ensures experiential reflections.
* Reasoning: Enhances self-improving decisions; preserves alpha via A2A alerts, making agents adaptive and informed for funded traceability (e.g., "Reflected on dashboard drag for +0.5% alpha save").